2025-06-07 16:20:36,938 - INFO - TCP服务正在监听：0.0.0.0:9000
2025-06-07 16:24:59,881 - INFO - 收到TCP请求: {"device_id": 1, "action": "toggle"}

2025-06-07 16:24:59,881 - INFO - 已响应TCP请求: {'status': 'success', 'command': {'device_id': 1, 'action': 'toggle'}, 'client': '127.0.0.1'}
2025-06-07 16:35:10,334 - INFO - 收到TCP请求: {"device_id": 1, "action": "toggle"}

2025-06-07 16:35:10,334 - INFO - 已响应TCP请求: {'status': 'success', 'command': {'device_id': 1, 'action': 'toggle'}, 'client': '127.0.0.1'}
2025-06-07 16:47:32,142 - INFO - TCP服务正在监听：0.0.0.0:9000
2025-06-07 16:47:39,216 - INFO - 收到TCP请求: {"device_id": 1, "action": "toggle"}

2025-06-07 16:47:39,216 - INFO - 已响应TCP请求: {'error': '未知操作'}
2025-06-07 16:49:13,293 - INFO - 收到TCP请求: {"operation": "control", "device_id": 1, "action": "toggle"}

2025-06-07 16:49:13,296 - ERROR - 设备不存在
2025-06-07 16:49:13,296 - INFO - 已响应TCP请求: {'error': '设备不存在'}
2025-06-07 16:49:21,485 - INFO - 收到TCP请求: {"operation": "control", "device_id": 1, "action": "toggle"}

2025-06-07 16:49:21,485 - ERROR - 设备不存在
2025-06-07 16:49:21,485 - INFO - 已响应TCP请求: {'error': '设备不存在'}
2025-06-07 16:53:07,777 - INFO - 收到TCP请求: {"operation": "create", "device_id": 123, "device_name": "NewDevice", "device_type": "Light", "location": "Living Room"}

2025-06-07 16:53:07,777 - INFO - 已响应TCP请求: {'error': '缺少room_id'}
2025-06-07 16:55:51,095 - INFO - 收到TCP请求: {"operation": "create", "name": "Test Light", "type": "Light", "room": 1, "status": false, "extra": null, "brand": "Xiaomi"}

2025-06-07 16:55:51,096 - INFO - 已响应TCP请求: {'error': '缺少room_id'}
2025-06-07 16:57:42,168 - INFO - TCP服务正在监听：0.0.0.0:9000
2025-06-07 17:03:03,664 - INFO - TCP服务正在监听：0.0.0.0:9000
2025-06-07 17:11:50,911 - INFO - TCP服务正在监听：0.0.0.0:9000
2025-06-07 17:11:53,086 - INFO - 收到TCP请求: {"operation": "create", "id": 17, "name": "\u4e66\u623f\u53f0\u706f", "type": "light", "room_id": 1, "status": true, "extra": {"brightness": 80, "color": "#FFDD88"}, "brand": null}

2025-06-07 17:11:53,086 - INFO - 已响应TCP请求: {'error': '缺少room_id'}
2025-06-07 17:15:12,600 - INFO - 收到TCP请求: {"operation": "create", "id": 17, "name": "\u4e66\u623f\u53f0\u706f", "type": "light", "room": 1, "status": true, "extra": {"brightness": 80, "color": "#FFDD88"}, "brand": null}

2025-06-07 17:15:12,601 - INFO - 已响应TCP请求: {'error': '缺少room_id'}
2025-06-07 17:21:13,549 - INFO - 收到TCP请求: {"operation": "create", "id": 17, "name": "\u4e66\u623f\u53f0\u706f", "type": "light", "room": 1, "status": true, "extra": {"brightness": 80, "color": "#FFDD88"}, "brand": null}

2025-06-07 17:21:13,549 - INFO - 已响应TCP请求: {'error': '缺少room_id'}
2025-06-07 17:21:26,403 - INFO - TCP服务正在监听：0.0.0.0:9000
2025-06-07 17:21:29,903 - INFO - 收到TCP请求: {"operation": "create", "id": 17, "name": "\u4e66\u623f\u53f0\u706f", "type": "light", "room": 1, "status": true, "extra": {"brightness": 80, "color": "#FFDD88"}, "brand": null}

2025-06-07 17:21:29,905 - INFO - 已响应TCP请求: {'error': '缺少room'}
2025-06-07 17:22:23,671 - INFO - 收到TCP请求: {"operation": "create", "id": 18, "name": "\u53f0\u706f", "type": "light", "room": 1, "status": true, "extra": {"brightness": 80, "color": "#FFDD88"}, "brand": null}

2025-06-07 17:22:23,671 - INFO - 已响应TCP请求: {'error': '缺少room'}
2025-06-07 17:23:09,993 - INFO - 收到TCP请求: {"operation": "create", "id": 18, "name": "\u53f0\u706f", "type": "light", "room": 1, "status": true, "extra": {"brightness": 80, "color": "#FFDD88"}, "brand": null}

2025-06-07 17:23:09,993 - INFO - 已响应TCP请求: {'error': '缺少room'}
2025-06-07 17:25:41,960 - INFO - 收到TCP请求: {"operation": "create", "id": 18, "name": "\u53f0\u706f", "type": "light", "room": 1, "status": true, "extra": {"brightness": 80, "color": "#FFDD88"}, "brand": null}

2025-06-07 17:25:41,960 - INFO - 已响应TCP请求: {'error': '缺少room'}
2025-06-07 17:25:54,612 - INFO - TCP服务正在监听：0.0.0.0:9000
2025-06-07 17:25:56,189 - INFO - 收到TCP请求: {"operation": "create", "id": 18, "name": "\u53f0\u706f", "type": "light", "room": 1, "status": true, "extra": {"brightness": 80, "color": "#FFDD88"}, "brand": null}

2025-06-07 17:25:56,193 - ERROR - 操作失败: django.db.models.query.QuerySet.create() got multiple values for keyword argument 'room'
Traceback (most recent call last):
  File "E:\3rd\Software Engineering\final\backend\smart_home_system\smart-home-backend-master\core\tcp_server.py", line 90, in handle_tcp_command
    device = Device.objects.create(room=room, **command)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: django.db.models.query.QuerySet.create() got multiple values for keyword argument 'room'
2025-06-07 17:25:56,194 - INFO - 已响应TCP请求: {'error': "操作失败: django.db.models.query.QuerySet.create() got multiple values for keyword argument 'room'"}
2025-06-07 17:28:34,677 - INFO - TCP服务正在监听：0.0.0.0:9000
2025-06-07 17:28:38,981 - INFO - 收到TCP请求: {"operation": "create", "id": 18, "name": "\u53f0\u706f", "type": "light", "room": 1, "status": true, "extra": {"brightness": 80, "color": "#FFDD88"}, "brand": null}

2025-06-07 17:28:38,987 - INFO - 已响应TCP请求: {'status': 'success', 'device_id': 18}
2025-06-07 19:33:10,879 - INFO - TCP服务正在监听：0.0.0.0:9000
2025-06-07 19:37:36,724 - INFO - TCP服务正在监听：0.0.0.0:9000
2025-06-07 19:38:36,259 - INFO - TCP服务正在监听：0.0.0.0:9000
2025-06-07 19:41:07,686 - INFO - 收到TCP请求: {"operation": "create", "id": 18, "name": "\u53f0\u706f", "type": "light", "room": 1, "status": true, "extra": {"brightness": 80, "color": "#FFDD88"}, "brand": null}

2025-06-07 19:41:07,708 - INFO - 已响应TCP请求: {'status': 'success', 'device_id': 19}
2025-06-07 19:41:21,412 - INFO - 收到TCP请求: {"operation": "create", "id": 18, "name": "\u53f0\u706f", "type": "light", "room": 1, "status": true, "extra": {"brightness": 80, "color": "#FFDD88"}, "brand": null}

2025-06-07 19:41:21,420 - INFO - 已响应TCP请求: {'status': 'success', 'device_id': 20}
2025-06-07 19:41:23,121 - INFO - 收到TCP请求: {"operation": "create", "id": 18, "name": "\u53f0\u706f", "type": "light", "room": 1, "status": true, "extra": {"brightness": 80, "color": "#FFDD88"}, "brand": null}

2025-06-07 19:41:23,124 - INFO - 已响应TCP请求: {'status': 'success', 'device_id': 21}
2025-06-07 19:41:27,463 - INFO - 收到TCP请求: {"operation": "create", "id": 18, "name": "\u53f0\u706f", "type": "light", "room": 1, "status": true, "extra": {"brightness": 80, "color": "#FFDD88"}, "brand": null}

2025-06-07 19:41:27,470 - INFO - 已响应TCP请求: {'status': 'success', 'device_id': 22}
2025-06-07 19:42:08,139 - INFO - 收到TCP请求: {"operation": "create", "id": 18, "name": "\u53f0\u706f", "type": "light", "room": 1, "status": true, "extra": {"brightness": 80, "color": "#FFDD88"}, "brand": null}

2025-06-07 19:42:08,145 - INFO - 已响应TCP请求: {'status': 'success', 'device_id': 23}
2025-06-07 19:44:25,909 - INFO - 收到TCP请求: {"operation": "delete", "id": 18, "name": "\u53f0\u706f", "type": "light", "room": 1, "status": true, "extra": {"brightness": 80, "color": "#FFDD88"}, "brand": null}

2025-06-07 19:44:25,914 - INFO - 已响应TCP请求: {'status': 'success', 'message': '设备 18 已删除'}
2025-06-07 19:49:06,834 - INFO - TCP服务正在监听：0.0.0.0:9000
2025-06-07 19:49:47,556 - INFO - 收到TCP请求: {"operation": "delete", "id": 18, "name": "\u53f0\u706f", "type": "light", "room": 1, "status": true, "extra": {"brightness": 80, "color": "#FFDD88"}, "brand": null}

2025-06-07 19:49:47,560 - ERROR - 设备不存在
2025-06-07 19:49:47,560 - INFO - 已响应TCP请求: {'error': '设备不存在'}
2025-06-07 19:49:58,033 - INFO - 收到TCP请求: {"operation": "create", "id": 18, "name": "\u53f0\u706f", "type": "light", "room": 1, "status": true, "extra": {"brightness": 80, "color": "#FFDD88"}, "brand": null}

2025-06-07 19:49:58,041 - INFO - 已响应TCP请求: {'status': 'success', 'device_id': 24}
2025-06-07 19:50:14,777 - INFO - 收到TCP请求: {"operation": "delete", "id": 18, "name": "\u53f0\u706f", "type": "light", "room": 1, "status": true, "extra": {"brightness": 80, "color": "#FFDD88"}, "brand": null}

2025-06-07 19:50:14,780 - ERROR - 设备不存在
2025-06-07 19:50:14,780 - INFO - 已响应TCP请求: {'error': '设备不存在'}
2025-06-08 11:36:08,847 - INFO - TCP服务正在监听：0.0.0.0:9000
2025-06-08 11:36:11,230 - INFO - 收到TCP请求: {"operation": "create", "id": 18, "name": "\u53f0\u706f", "type": "light", "room": 1, "status": true, "extra": {"brightness": 80, "color": "#FFDD88"}, "brand": null}

2025-06-08 11:36:11,237 - INFO - 已响应TCP请求: {'status': 'success', 'device_id': 25}
2025-06-12 22:42:00,747 - INFO - TCP服务正在监听：0.0.0.0:9000
